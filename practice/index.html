<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>High Performance LinkedList</title>
</head>
<body>

<script>

    class Node {
        constructor(data){
            this.data = data;
            this.next = null;
        }
    }

    class LinkedList {
        constructor(){
            this.head = null;
            this.tail = null;   // âš¡ tail pointer = O(1) insert
            this.length = 0;
        }

        // O(1)
        addNode(data){
            const node = new Node(data);

            if(!this.head){
                this.head = this.tail = node;
            } else {
                this.tail.next = node;
                this.tail = node;
            }
            this.length++;
        }

        // O(n)
        deleteNode(value){
            if(!this.head) return;

            if(this.head.data === value){
                this.head = this.head.next;
                if(!this.head) this.tail = null;
                this.length--;
                return;
            }

            let prev = this.head;
            let curr = this.head.next;

            while(curr){
                if(curr.data === value){
                    prev.next = curr.next;
                    if(curr === this.tail) this.tail = prev;
                    this.length--;
                    return;
                }
                prev = curr;
                curr = curr.next;
            }
        }

        // O(n)
        find(data){
            let t = this.head;
            while(t){
                if(t.data === data) return true;
                t = t.next;
            }
            return false;
        }

        // O(n)
        reverse(){
            let prev = null, curr = this.head;
            this.tail = this.head;

            while(curr){
                let next = curr.next;
                curr.next = prev;
                prev = curr;
                curr = next;
            }
            this.head = prev;
        }

        // Real benchmark friendly traversal
        traverse(){
            let count = 0;
            let t = this.head;
            while(t){
                count++;
                t = t.next;
            }
            return count;
        }
    }

    // ------------------- BENCHMARK ---------------------

    const list = new LinkedList();

    console.time("Insertion");
    for(let i=0;i<1000000;i++){
        list.addNode(i);
    }
    console.timeEnd("Insertion");

    console.time("Traversal");
    console.log("Nodes:", list.traverse());
    console.timeEnd("Traversal");

</script>
</body>
</html>
